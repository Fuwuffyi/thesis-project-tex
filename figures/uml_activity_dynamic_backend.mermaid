---
config:
  fontSize: 24
---
sequenceDiagram
    participant Program
    participant ResourceManager
    participant RendererFactory
    participant IRenderer
    participant GLRenderer
    participant VkRenderer
    Program->>ResourceManager: loadScene()
    ResourceManager-->>Program: Scene
    alt OpenGL mode
        activate Program
        Program->>RendererFactory: create(API::OpenGL)
        activate RendererFactory
        RendererFactory->>GLRenderer: initialize()
        activate GLRenderer
        GLRenderer-->>RendererFactory: ready
        deactivate GLRenderer
        RendererFactory-->>Program: IRenderer (GLRenderer)
        deactivate RendererFactory
        Program-->>User: OpenGL renderer ready
        deactivate Program
    else Vulkan mode
        activate Program
        Program->>RendererFactory: create(API::Vulkan)
        activate RendererFactory
        RendererFactory->>VkRenderer: initialize()
        activate VkRenderer
        VkRenderer-->>RendererFactory: ready
        deactivate VkRenderer
        RendererFactory-->>Program: IRenderer (VkRenderer)
        deactivate RendererFactory
        Program-->>User: Vulkan renderer ready
        deactivate Program
    end
    Program->>IRenderer: setActiveScene(Scene)
    Program->>IRenderer: setActiveCamera(Camera)
    IRenderer-->>Program: render configured
